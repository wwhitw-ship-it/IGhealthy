<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IG å¸³è™Ÿå¥æª¢è¨ºæ–·æ›¸</title>
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- è¨­å®š Tailwind çš„åˆ—å°æ¨£å¼èˆ‡æ²è»¸ -->
    <style>
        @media print {
            body { -webkit-print-color-adjust: exact; }
        }
        textarea::-webkit-scrollbar { width: 8px; }
        textarea::-webkit-scrollbar-track { background: #f1f1f1; }
        textarea::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }
        textarea::-webkit-scrollbar-thumb:hover { background: #9ca3af; }
    </style>

    <!-- å¼•å…¥ React å’Œ ReactDOM (å…¨åŸŸ UMD ç‰ˆæœ¬ï¼Œé©åˆç›´æ¥é–‹å•Ÿæª”æ¡ˆ) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- å¼•å…¥ Babel (ç·¨è­¯ JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

    <div id="root"></div>

    <script type="text/babel">
        // 1. å¾å…¨åŸŸç‰©ä»¶å–å¾— React åŠŸèƒ½ï¼Œä¸ä½¿ç”¨ import ä»¥é¿å…æœ¬åœ°ç«¯ CORS éŒ¯èª¤
        const { useState, useEffect } = React;

        // 2. å…§å»ºåœ–æ¨™çµ„ä»¶ (Inline SVG)ï¼Œè§£æ±ºæœ¬åœ°ç«¯ module loading å•é¡Œ
        const IconBase = ({ children, color = "currentColor", size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Instagram = (props) => <IconBase {...props}><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></IconBase>;
        const CheckCircle2 = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></IconBase>;
        const Copy = (props) => <IconBase {...props}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></IconBase>;
        const ThumbsUp = (props) => <IconBase {...props}><path d="M7 10v12"/><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"/></IconBase>;
        const TrendingUp = (props) => <IconBase {...props}><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></IconBase>;
        const RefreshCw = (props) => <IconBase {...props}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></IconBase>;
        const ExternalLink = (props) => <IconBase {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></IconBase>;
        const FileText = (props) => <IconBase {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></IconBase>;
        const Sparkles = (props) => <IconBase {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></IconBase>;
        const PenTool = (props) => <IconBase {...props}><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></IconBase>;

        // 3. ä¸»ç¨‹å¼é‚è¼¯
        const App = () => {
            const [accountName, setAccountName] = useState('');
            
            // æœ€çµ‚å ±å‘Šå…§å®¹ (å¯ç·¨è¼¯)
            const [goodPoints, setGoodPoints] = useState('');
            const [improvePoints, setImprovePoints] = useState('');
            
            // è‡ªè¨‚è§€å¯Ÿè¼¸å…¥ (åŸå§‹é—œéµå­—)
            const [customHighlightRaw, setCustomHighlightRaw] = useState('');
            const [customIssueRaw, setCustomIssueRaw] = useState('');

            const [score, setScore] = useState(0);
            const [showCopySuccess, setShowCopySuccess] = useState(false);

            // å¥æª¢é …ç›®æ¸…å–®
            const [checklist, setChecklist] = useState([
                { id: 1, text: 'å¤§é ­è²¼æ¸…æ™°å°ˆæ¥­', category: 'profile', checked: false },
                { id: 2, text: 'ID ç°¡å–®å¥½è¨˜', category: 'profile', checked: false },
                { id: 3, text: 'åç¨±å«æœå°‹é—œéµå­—', category: 'profile', checked: false },
                { id: 4, text: 'Bio æ¸…æ¥šèªªæ˜åƒ¹å€¼', category: 'bio', checked: false },
                { id: 5, text: 'åŒ…å« CTA è¡Œå‹•å‘¼ç±²', category: 'bio', checked: false },
                { id: 6, text: 'ç²¾é¸å‹•æ…‹åˆ†é¡æ¸…æ™°', category: 'bio', checked: false },
                { id: 7, text: 'ç‰ˆé¢è‰²èª¿é¢¨æ ¼ä¸€è‡´', category: 'content', checked: false },
                { id: 8, text: 'é¦–åœ–æ¸…æ™°æ¨™é¡Œå¸ç›', category: 'content', checked: false },
                { id: 9, text: 'ä¿æŒæŒçºŒæ›´æ–°é »ç‡', category: 'content', checked: false },
                { id: 10, text: 'ç©æ¥µå›è¦†ç•™è¨€äº’å‹•', category: 'engagement', checked: false },
            ]);

            // å®šç¾©æ¯å€‹æª¢æŸ¥é …ç›®å°æ‡‰çš„ã€Œæ”¹å–„å»ºè­°ã€ (é‡å°æœªå‹¾é¸)
            const suggestionMap = {
                1: 'å¤§é ­è²¼å»ºè­°æ›´æ›ç‚ºæ¸…æ™°ã€å…·å°ˆæ¥­æ„Ÿæˆ–å¼·çƒˆå€‹äººç‰¹è‰²çš„ç…§ç‰‡ï¼Œå¢åŠ ç¬¬ä¸€çœ¼è¾¨è­˜åº¦ã€‚',
                2: 'å¸³è™Ÿ ID å»ºè­°ç°¡åŒ–ï¼Œå»é™¤éå¤šåº•ç·šæˆ–æ•¸å­—ï¼Œè®“ç²‰çµ²æ›´å®¹æ˜“å£é ­å‚³æ’­èˆ‡æœå°‹ã€‚',
                3: 'åç¨± (Name) æ¬„ä½å»ºè­°åŠ å…¥ã€Œç”¢æ¥­ã€æˆ–ã€Œæœå‹™ã€é—œéµå­—ï¼Œæå‡è¢«æ½›åœ¨å®¢æˆ¶æœå°‹åˆ°çš„æ©Ÿæœƒã€‚',
                4: 'Bio èªªæ˜ä¸å¤ ç›´è§€ï¼Œå»ºè­°ç”¨æ¢åˆ—å¼æ¸…æ¥šå¯«å‡ºã€Œä½ æ˜¯èª°ã€ä»¥åŠã€Œä½ èƒ½è§£æ±ºä»€éº¼å•é¡Œã€ã€‚',
                5: 'Bio ç¼ºä¹æ˜ç¢ºè¡Œå‹•å‘¼ç±² (CTA)ï¼Œå»ºè­°åŠ ä¸Šã€Œâ¬‡ï¸ é»æ“Šä¸‹æ–¹é€£çµ...ã€å…·é«”å¼•å°ç²‰çµ²é»æ“Šã€‚',
                6: 'ç²¾é¸å‹•æ…‹å»ºè­°è£½ä½œçµ±ä¸€è‰²ç³»æˆ–é¢¨æ ¼çš„å°é¢åœ–ï¼Œä¸¦å°‡éæœŸè³‡è¨Šæ­¸æª”ï¼Œä¿æŒç‰ˆé¢æ•´æ½”ã€‚',
                7: 'ç‰ˆé¢è¦–è¦ºè¼ƒç‚ºè·³èºï¼Œå»ºè­°å›ºå®š 1-2 ç¨®ä¸»è‰²èª¿æˆ–æ¿¾é¡é¢¨æ ¼ï¼Œå»ºç«‹å“ç‰Œä¸€è‡´æ€§ã€‚',
                8: 'è²¼æ–‡é¦–åœ–è³‡è¨Šé‡éå¤šæˆ–å­—é«”å¤ªå°ï¼Œå»ºè­°å„ªåŒ–æ¨™é¡Œè¨­è¨ˆï¼ŒåŠ å…¥ç—›é»æˆ–å¥½å¥‡å¿ƒå…ƒç´ æå‡é»æ“Šã€‚',
                9: 'è¿‘æœŸæ›´æ–°é »ç‡ä¸ç©©å®šï¼Œå»ºè­°åˆ¶å®šå…§å®¹è¡Œäº‹æ›†ï¼Œç¶­æŒæ¯é€±å›ºå®šç™¼æ–‡ï¼ˆå¦‚ 2-3 ç¯‡ï¼‰ä»¥ç¶­æŒè§¸åŠã€‚',
                10: 'å»ºè­°æ›´ç©æ¥µå›è¦†ç•™è¨€ï¼Œä¸¦å–„ç”¨é™æ™‚å‹•æ…‹å•ç­”èˆ‡ç²‰çµ²äº’å‹•ï¼Œæå‡å¸³è™Ÿè¦ªå¯†åº¦èˆ‡æ¼”ç®—æ³•æ¬Šé‡ã€‚'
            };

            // å®šç¾©æ¯å€‹æª¢æŸ¥é …ç›®å°æ‡‰çš„ã€Œå„ªé»è®šç¾ã€ (é‡å°å·²å‹¾é¸)
            const goodPointMap = {
                1: 'å¤§é ­è²¼éå¸¸æ¸…æ™°ä¸”å…·å°ˆæ¥­æ„Ÿï¼Œç¬¬ä¸€çœ¼å°±èƒ½å‚³éå‡ºè‰¯å¥½çš„å“ç‰Œä¿¡ä»»åº¦ã€‚',
                2: 'å¸³è™Ÿ ID ç°¡æ½”å¥½è¨˜ï¼Œæ²’æœ‰å¤šé¤˜ç¬¦è™Ÿï¼Œéå¸¸æœ‰åˆ©æ–¼ç²‰çµ²æœå°‹èˆ‡è¨˜æ†¶ã€‚',
                3: 'åç¨±è¨­å®šç²¾æº–ï¼ŒåŒ…å«äº†é‡è¦é—œéµå­—ï¼Œèƒ½æœ‰æ•ˆæå‡åœ¨æœå°‹çµæœçš„æ›å…‰åº¦ã€‚',
                4: 'Bio å¯«å¾—éå¸¸æ¸…æ¥šï¼Œèƒ½åœ¨å¹¾ç§’é˜å…§è®“è¨ªå®¢çŸ¥é“ä½ èƒ½æä¾›ä»€éº¼åƒ¹å€¼ã€‚',
                5: 'Bio ä¸­çš„ CTA è¨­å®šæ˜ç¢ºï¼Œèƒ½æœ‰æ•ˆå¼•å°ç²‰çµ²é€²è¡Œä¸‹ä¸€æ­¥å‹•ä½œï¼ˆé»æ“Šé€£çµï¼‰ã€‚',
                6: 'ç²¾é¸å‹•æ…‹å°é¢é¢¨æ ¼çµ±ä¸€ï¼Œè¦–è¦ºä¸Šéå¸¸æ•´æ½”èˆ’é©ï¼Œåˆ†é¡é‚è¼¯ä¹Ÿå¾ˆæ¸…æ¥šã€‚',
                7: 'ç‰ˆé¢è‰²èª¿èˆ‡é¢¨æ ¼ç¶­æŒå¾—å¾ˆå¥½ï¼Œå…·æœ‰é«˜åº¦çš„ä¸€è‡´æ€§ï¼Œå“ç‰Œè­˜åˆ¥åº¦é«˜ã€‚',
                8: 'è²¼æ–‡é¦–åœ–è¨­è¨ˆå¸ç›ï¼Œæ¨™é¡Œå­—é«”æ¸…æ™°ï¼Œèƒ½æœ‰æ•ˆå¸å¼•äººé»é€²å»è§€çœ‹ã€‚',
                9: 'æ›´æ–°é »ç‡éå¸¸ç©©å®šï¼Œèƒ½æŒçºŒç¶­æŒèˆ‡ç²‰çµ²çš„äº’å‹•ç†±åº¦ï¼Œé€™é»éå¸¸æ£’ï¼',
                10: 'èˆ‡ç²‰çµ²çš„äº’å‹•éå¸¸ç©æ¥µï¼Œå›è¦†ç•™è¨€è¿…é€Ÿä¸”è¦ªåˆ‡ï¼Œç¤¾ç¾¤é»è‘—åº¦ç¶“ç‡Ÿå¾—å¾ˆå¥½ã€‚'
            };

            // --- æ™ºæ…§å¥å‹åº« (æ¨¡æ“¬ AI æ½¤é£¾) ---
            const goodTemplates = [
                (key) => `è§€å¯Ÿåˆ°æ‚¨çš„${key}ï¼Œé€™å±•ç¾äº†éå¸¸ç¨ç‰¹çš„å€‹äººé­…åŠ›ï¼Œå»ºè­°æŒçºŒä¿æŒï¼`,
                (key) => `ç‰¹åˆ¥å–œæ­¡æ‚¨${key}çš„éƒ¨åˆ†ï¼Œé€™èƒ½æœ‰æ•ˆå»ºç«‹èˆ‡ç²‰çµ²ä¹‹é–“çš„æ·±å±¤é€£çµã€‚`,
                (key) => `æ‚¨çš„${key}æ˜¯ä¸€å€‹å¾ˆå¤§çš„äº®é»ï¼Œåœ¨åŒé¡å‹çš„å¸³è™Ÿä¸­éå¸¸æœ‰è¨˜æ†¶é»ã€‚`,
                (key) => `çœ‹å¾—å‡ºä¾†åœ¨${key}ä¸Šä¸‹äº†å¾ˆå¤šåŠŸå¤«ï¼Œæ•´é«”çš„è³ªæ„Ÿéå¸¸å„ªç§€ã€‚`
            ];

            const improveTemplates = [
                (key) => `ç›®å‰è§€å¯Ÿåˆ°${key}ï¼Œå»ºè­°å¯ä»¥ç¨å¾®èª¿æ•´æ–¹å‘ï¼Œæœƒè®“æ•´é«”è³ªæ„Ÿæ›´å‡ç´šã€‚`,
                (key) => `é›–ç„¶å…§å®¹ä¸éŒ¯ï¼Œä½†${key}å¯èƒ½æœƒå½±éŸ¿ç²‰çµ²çš„è§€çœ‹é«”é©—ï¼Œå»ºè­°å„ªå…ˆå„ªåŒ–æ­¤è™•ã€‚`,
                (key) => `é‡å°${key}çš„éƒ¨åˆ†ï¼Œå»ºè­°å¯ä»¥åƒè€ƒç«¶å“çš„åšæ³•é€²è¡Œå¾®èª¿ï¼Œä»¥æå‡è½‰æ›ç‡ã€‚`,
                (key) => `ç™¼ç¾${key}ï¼Œé€™å¯èƒ½æ˜¯å°è‡´è§¸åŠç‡å—é™çš„åŸå› ä¹‹ä¸€ï¼Œå»ºè­°å˜—è©¦ä¸åŒçš„å‘ˆç¾æ–¹å¼ã€‚`
            ];

            const getRandomTemplate = (templates, keyword) => {
                const randomIndex = Math.floor(Math.random() * templates.length);
                return templates[randomIndex](keyword);
            };

            const generateCombinedGoodPoints = () => {
                let finalOutput = '';
                const checkedItems = checklist.filter(item => item.checked);
                if (checkedItems.length > 0) {
                    finalOutput += checkedItems.map(item => `âœ… ${goodPointMap[item.id]}`).join('\n');
                }
                if (customHighlightRaw.trim()) {
                    const keywords = customHighlightRaw.split(/[,ï¼Œ\n]/).filter(k => k.trim());
                    if (keywords.length > 0) {
                        finalOutput += '\n\nâœ¨ [é¡§å•ç‰¹åˆ¥è§€å¯Ÿ]\n';
                        keywords.forEach(key => {
                            finalOutput += `â€¢ ${getRandomTemplate(goodTemplates, key.trim())}\n`;
                        });
                    }
                }
                if (!finalOutput) finalOutput = 'ï¼ˆç›®å‰æ²’æœ‰å‹¾é¸ä»»ä½•å„ªé»ï¼Œä¹Ÿæ²’æœ‰è¼¸å…¥è‡ªè¨‚è§€å¯Ÿï¼‰';
                setGoodPoints(finalOutput);
            };

            const generateCombinedImprovePoints = () => {
                let finalOutput = '';
                const uncheckedItems = checklist.filter(item => !item.checked);
                if (uncheckedItems.length > 0) {
                    finalOutput += uncheckedItems.map(item => `âš ï¸ ${suggestionMap[item.id]}`).join('\n');
                }
                if (customIssueRaw.trim()) {
                    const keywords = customIssueRaw.split(/[,ï¼Œ\n]/).filter(k => k.trim());
                    if (keywords.length > 0) {
                        finalOutput += '\n\nğŸ’¡ [å®¢è£½åŒ–å„ªåŒ–ç­–ç•¥]\n';
                        keywords.forEach(key => {
                            finalOutput += `â€¢ ${getRandomTemplate(improveTemplates, key.trim())}\n`;
                        });
                    }
                }
                if (!finalOutput) finalOutput = 'ï¼ˆå¤ªæ£’äº†ï¼ç›®å‰åŸºç¤é …ç›®å…¨æ•¸é€šéï¼‰';
                setImprovePoints(finalOutput);
            };

            useEffect(() => {
                const checkedCount = checklist.filter(item => item.checked).length;
                const calculatedScore = Math.round((checkedCount / checklist.length) * 100);
                setScore(calculatedScore);
            }, [checklist]);

            const toggleCheck = (id) => {
                setChecklist(prev => prev.map(item => 
                    item.id === id ? { ...item, checked: !item.checked } : item
                ));
            };

            const generateReportText = () => {
                const checkedItems = checklist.filter(i => i.checked).map(i => `âœ… ${i.text}`).join('\n');
                const uncheckedItems = checklist.filter(i => !i.checked).map(i => `â¬œ ${i.text}`).join('\n');
                
                return `ğŸ“Š IG å¸³è™Ÿå¥æª¢å ±å‘Š
-------------------------
ğŸ‘¤ å¸³è™Ÿï¼š${accountName || 'æœªå¡«å¯«'}
ğŸ† å¥åº·åº¦åˆ†æ•¸ï¼š${score} åˆ†
-------------------------

âœ¨ ã€åšå¾—å¾ˆå¥½çš„åœ°æ–¹ã€‘
${goodPoints || 'ï¼ˆæš«ç„¡ç‰¹åˆ¥å‚™è¨»ï¼‰'}

ğŸ’¡ ã€å¯ä»¥æ›´å¥½çš„åœ°æ–¹ã€‘
${improvePoints || 'ï¼ˆæš«ç„¡ç‰¹åˆ¥å‚™è¨»ï¼‰'}

-------------------------
ğŸ“ ã€åŸºç¤é …ç›®æª¢æ ¸ã€‘
${checkedItems}

âš ï¸ ã€å»ºè­°è£œå¼·é …ç›®ã€‘
${uncheckedItems}

ğŸ“… å¥æª¢æ—¥æœŸï¼š${new Date().toLocaleDateString()}
`;
            };

            const copyToClipboard = () => {
                const text = generateReportText();
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.left = "-9999px";
                textArea.style.top = "0";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        triggerSuccess();
                    } else {
                        alert('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¤‡è£½å…§å®¹ã€‚');
                    }
                } catch (err) {
                    console.error('ç„¡æ³•è¤‡è£½', err);
                }
                document.body.removeChild(textArea);
            };

            const handlePrint = () => {
                window.print();
            };

            const triggerSuccess = () => {
                setShowCopySuccess(true);
                setTimeout(() => setShowCopySuccess(false), 2000);
            };

            const resetForm = () => {
                if(confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰å…§å®¹å—ï¼Ÿ')) {
                    setAccountName('');
                    setGoodPoints('');
                    setImprovePoints('');
                    setCustomHighlightRaw('');
                    setCustomIssueRaw('');
                    setChecklist(prev => prev.map(item => ({...item, checked: false})));
                }
            };

            const openInstagram = () => {
                if (accountName) {
                    const cleanName = accountName.replace('@', '').trim();
                    window.open(`https://www.instagram.com/${cleanName}/`, '_blank');
                }
            };

            const getScoreColor = (s) => {
                if (s >= 80) return 'text-green-600';
                if (s >= 50) return 'text-yellow-600';
                return 'text-red-500';
            };

            const getCategoryName = (cat) => {
                switch(cat) {
                    case 'profile': return 'åŸºæœ¬é–€é¢';
                    case 'bio': return 'ç°¡ä»‹èˆ‡å‹•æ…‹';
                    case 'content': return 'å…§å®¹èˆ‡æ’ç‰ˆ';
                    case 'engagement': return 'äº’å‹•è¡¨ç¾';
                    default: return 'å…¶ä»–';
                }
            };

            const groupedChecklist = checklist.reduce((acc, item) => {
                if (!acc[item.category]) acc[item.category] = [];
                acc[item.category].push(item);
                return acc;
            }, {});

            return (
                <div className="min-h-screen bg-gray-50 text-gray-800 font-sans">
                    {/* --- è¢å¹•é¡¯ç¤ºä»‹é¢ --- */}
                    <div className="p-4 md:p-8 print:hidden">
                        <div className="max-w-4xl mx-auto space-y-6">
                            
                            {/* Header */}
                            <header className="bg-white rounded-2xl shadow-sm p-6 flex flex-col md:flex-row items-center justify-between border-t-4 border-pink-500">
                                <div className="flex items-center space-x-3 mb-4 md:mb-0">
                                    <div className="bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-500 p-3 rounded-full text-white">
                                        <Instagram size={32} />
                                    </div>
                                    <div>
                                        <h1 className="text-2xl font-bold text-gray-900">IG å¸³è™Ÿå¥æª¢è¨ºæ–·æ›¸</h1>
                                        <p className="text-gray-500 text-sm">å¿«é€Ÿåˆ†æã€æ™ºæ…§æ“´å¯«ã€ä¸€éµç”Ÿæˆå ±å‘Š</p>
                                    </div>
                                </div>
                                <div className="flex items-center space-x-4">
                                    <div className="text-right hidden md:block">
                                        <div className="text-sm text-gray-500">ç•¶å‰å¥åº·åº¦</div>
                                        <div className={`text-3xl font-black ${getScoreColor(score)}`}>{score} åˆ†</div>
                                    </div>
                                    <button onClick={resetForm} className="p-2 text-gray-400 hover:text-red-500 transition-colors" title="é‡ç½®è¡¨å–®">
                                        <RefreshCw size={20} />
                                    </button>
                                </div>
                            </header>

                            {/* Input Section */}
                            <div className="bg-white rounded-2xl shadow-sm p-6">
                                <label className="block text-sm font-medium text-gray-700 mb-2">å—æ¸¬å¸³è™Ÿ (ID)</label>
                                <div className="flex flex-col md:flex-row gap-3">
                                    <div className="flex-1 flex items-center bg-gray-100 rounded-lg px-4 py-2">
                                        <span className="text-gray-500 mr-2 font-bold">@</span>
                                        <input type="text" value={accountName} onChange={(e) => setAccountName(e.target.value)} placeholder="your_instagram_id" className="bg-transparent border-none outline-none w-full text-lg font-medium text-gray-900 placeholder-gray-400" />
                                    </div>
                                    <button onClick={openInstagram} disabled={!accountName} className={`flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-all ${accountName ? 'bg-pink-500 text-white hover:bg-pink-600 shadow-md' : 'bg-gray-200 text-gray-400 cursor-not-allowed'}`}>
                                        <ExternalLink size={18} className="mr-2" />
                                        å‰å¾€æŸ¥çœ‹
                                    </button>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                {/* Left Column: Checklist */}
                                <div className="lg:col-span-1 space-y-6">
                                    <div className="bg-white rounded-2xl shadow-sm p-6">
                                        <h2 className="text-lg font-bold mb-4 flex items-center">
                                            <CheckCircle2 className="mr-2 text-green-500" />
                                            æ­¥é©Ÿ 1ï¼šåŸºç¤é …ç›®æª¢æ ¸
                                        </h2>
                                        <div className="space-y-6">
                                            {Object.entries(groupedChecklist).map(([category, items]) => (
                                                <div key={category}>
                                                    <h3 className="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 flex items-center">{getCategoryName(category)}</h3>
                                                    <div className="space-y-2">
                                                        {items.map(item => (
                                                            <div key={item.id} onClick={() => toggleCheck(item.id)} className={`flex items-start p-2 rounded-lg cursor-pointer transition-all ${item.checked ? 'bg-green-50' : 'hover:bg-gray-50'}`}>
                                                                <div className={`mt-0.5 mr-3 flex-shrink-0 w-5 h-5 rounded border flex items-center justify-center transition-colors ${item.checked ? 'bg-green-500 border-green-500' : 'border-gray-300 bg-white'}`}>
                                                                    {item.checked && <CheckCircle2 size={14} className="text-white" />}
                                                                </div>
                                                                <span className={`text-sm ${item.checked ? 'text-gray-900 font-medium' : 'text-gray-600'}`}>{item.text}</span>
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>

                                {/* Right Column */}
                                <div className="lg:col-span-2 space-y-6">
                                    {/* é¡§å•è§€å¯Ÿç­†è¨˜ */}
                                    <div className="bg-blue-50 rounded-2xl shadow-sm p-6 border border-blue-100">
                                        <h2 className="text-lg font-bold mb-4 flex items-center text-blue-800">
                                            <PenTool className="mr-2 text-blue-500" />
                                            æ­¥é©Ÿ 2ï¼šé¡§å•è§€å¯Ÿç­†è¨˜ (AI æ™ºæ…§æ“´å¯«)
                                        </h2>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div>
                                                <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">æ‚¨çœ‹åˆ°çš„äº®é» (é—œéµå­—ï¼Œç”¨é€—è™Ÿåˆ†éš”)</label>
                                                <input type="text" value={customHighlightRaw} onChange={(e) => setCustomHighlightRaw(e.target.value)} placeholder="ä¾‹ï¼šé™å‹•å¾ˆå¥½ç¬‘ï¼Œæ–‡æ¡ˆå¾ˆå¹½é»˜" className="w-full p-3 rounded-xl border border-blue-200 focus:border-blue-400 outline-none text-sm" />
                                            </div>
                                            <div>
                                                <label className="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">æ‚¨çœ‹åˆ°çš„ç—›é» (é—œéµå­—ï¼Œç”¨é€—è™Ÿåˆ†éš”)</label>
                                                <input type="text" value={customIssueRaw} onChange={(e) => setCustomIssueRaw(e.target.value)} placeholder="ä¾‹ï¼šç…§ç‰‡å¾ˆç³Šï¼Œæ’ç‰ˆå¤ªäº‚" className="w-full p-3 rounded-xl border border-blue-200 focus:border-blue-400 outline-none text-sm" />
                                            </div>
                                        </div>
                                        <div className="mt-2 text-xs text-blue-400 flex items-center">
                                            <Sparkles size={12} className="mr-1" />
                                            è¼¸å…¥é—œéµå­—å¾Œï¼ŒæŒ‰ä¸‹æ–¹çš„ã€Œç”Ÿæˆå ±å‘Šã€æŒ‰éˆ•ï¼Œç³»çµ±æœƒè‡ªå‹•å¹«æ‚¨æ½¤é£¾æˆå°ˆæ¥­èªå¥ã€‚
                                        </div>
                                    </div>

                                    {/* 1. å¾ˆå¥½çš„åœ°æ–¹ */}
                                    <div className="bg-white rounded-2xl shadow-sm p-6 border-l-4 border-green-400">
                                        <div className="flex justify-between items-center mb-3">
                                            <h2 className="text-lg font-bold flex items-center text-gray-800">
                                                <ThumbsUp className="mr-2 text-green-500" />
                                                åšå¾—å¾ˆå¥½çš„åœ°æ–¹ (Step 3: çµæœ)
                                            </h2>
                                            <button onClick={generateCombinedGoodPoints} className="flex items-center text-xs md:text-sm bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 transition-colors font-bold shadow-sm">
                                                <Sparkles size={16} className="mr-1.5" /> ç”Ÿæˆå„ªé»å ±å‘Š
                                            </button>
                                        </div>
                                        <textarea value={goodPoints} onChange={(e) => setGoodPoints(e.target.value)} placeholder="é»æ“Šå³ä¸Šè§’æŒ‰éˆ•ï¼Œè‡ªå‹•åˆä½µã€Œå‹¾é¸é …ç›®ã€èˆ‡ã€Œæ‚¨çš„è§€å¯Ÿç­†è¨˜ã€..." className="w-full h-32 p-4 bg-gray-50 rounded-xl border border-gray-200 focus:border-green-400 focus:ring-2 focus:ring-green-100 outline-none resize-none transition-all"></textarea>
                                    </div>

                                    {/* 2. å¯ä»¥æ›´å¥½çš„åœ°æ–¹ */}
                                    <div className="bg-white rounded-2xl shadow-sm p-6 border-l-4 border-orange-400">
                                        <div className="flex justify-between items-center mb-3">
                                            <h2 className="text-lg font-bold flex items-center text-gray-800">
                                                <TrendingUp className="mr-2 text-orange-500" />
                                                å¯ä»¥æ›´å¥½çš„åœ°æ–¹ (Step 3: çµæœ)
                                            </h2>
                                            <button onClick={generateCombinedImprovePoints} className="flex items-center text-xs md:text-sm bg-orange-600 text-white px-3 py-1.5 rounded-lg hover:bg-orange-700 transition-colors font-bold shadow-sm">
                                                <Sparkles size={16} className="mr-1.5" /> ç”Ÿæˆå»ºè­°å ±å‘Š
                                            </button>
                                        </div>
                                        <textarea value={improvePoints} onChange={(e) => setImprovePoints(e.target.value)} placeholder="é»æ“Šå³ä¸Šè§’æŒ‰éˆ•ï¼Œè‡ªå‹•åˆä½µã€Œæœªå‹¾é¸é …ç›®ã€èˆ‡ã€Œæ‚¨çš„è§€å¯Ÿç­†è¨˜ã€..." className="w-full h-32 p-4 bg-gray-50 rounded-xl border border-gray-200 focus:border-orange-400 focus:ring-2 focus:ring-orange-100 outline-none resize-none transition-all"></textarea>
                                    </div>

                                    {/* Action Buttons */}
                                    <div className="bg-white rounded-2xl shadow-sm p-6 flex flex-col sm:flex-row gap-4">
                                        <button onClick={copyToClipboard} className={`flex-1 flex items-center justify-center px-4 py-3 rounded-xl font-bold transition-all ${showCopySuccess ? 'bg-green-500 text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`}>
                                            {showCopySuccess ? <> <CheckCircle2 size={20} className="mr-2" /> å·²è¤‡è£½æ–‡å­— </> : <> <Copy size={20} className="mr-2" /> è¤‡è£½æ–‡å­—å ±å‘Š </>}
                                        </button>
                                        <button onClick={handlePrint} className="flex-1 flex items-center justify-center px-4 py-3 rounded-xl font-bold text-white bg-gray-900 hover:bg-gray-800 transition-all shadow-lg hover:shadow-xl">
                                            <FileText size={20} className="mr-2" /> ä¸‹è¼‰ / åˆ—å° PDF
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* --- åˆ—å°å°ˆç”¨ç‰ˆé¢ --- */}
                    <div className="hidden print:block p-8 max-w-3xl mx-auto bg-white">
                        <div className="border-b-2 border-gray-200 pb-6 mb-8 flex justify-between items-end">
                            <div>
                                <h1 className="text-3xl font-bold text-gray-900 mb-2">IG å¸³è™Ÿå¥æª¢è¨ºæ–·æ›¸</h1>
                                <p className="text-gray-500">å°ˆæ¥­ç¤¾ç¾¤å¸³è™Ÿåˆ†æå ±å‘Š</p>
                            </div>
                            <div className="text-right">
                                <div className="text-sm text-gray-400 mb-1">è¨ºæ–·æ—¥æœŸ</div>
                                <div className="font-mono text-gray-600">{new Date().toLocaleDateString()}</div>
                            </div>
                        </div>

                        <div className="flex justify-between items-start mb-10 bg-gray-50 p-6 rounded-xl">
                            <div>
                                <div className="text-sm text-gray-500 mb-1">å—æ¸¬å¸³è™Ÿ</div>
                                <div className="text-2xl font-bold text-gray-800">{accountName || 'æœªæŒ‡å®š'}</div>
                            </div>
                            <div className="text-right">
                                <div className="text-sm text-gray-500 mb-1">å¥åº·åº¦è©•åˆ†</div>
                                <div className={`text-4xl font-black ${getScoreColor(score)}`}>
                                    {score} <span className="text-lg text-gray-400 font-normal">/ 100</span>
                                </div>
                            </div>
                        </div>

                        <div className="grid grid-cols-2 gap-8 mb-10">
                            <div className="col-span-1">
                                <h3 className="font-bold text-lg text-green-700 mb-3 border-b border-green-200 pb-2 flex items-center">
                                    <ThumbsUp size={18} className="mr-2" /> åšå¾—å¾ˆå¥½çš„åœ°æ–¹
                                </h3>
                                <div className="text-gray-700 whitespace-pre-wrap leading-relaxed text-sm min-h-[100px]">{goodPoints || 'ï¼ˆç„¡ç‰¹åˆ¥å‚™è¨»ï¼‰'}</div>
                            </div>
                            <div className="col-span-1">
                                <h3 className="font-bold text-lg text-orange-700 mb-3 border-b border-orange-200 pb-2 flex items-center">
                                    <TrendingUp size={18} className="mr-2" /> å¯ä»¥æ›´å¥½çš„åœ°æ–¹
                                </h3>
                                <div className="text-gray-700 whitespace-pre-wrap leading-relaxed text-sm min-h-[100px]">{improvePoints || 'ï¼ˆç„¡ç‰¹åˆ¥å‚™è¨»ï¼‰'}</div>
                            </div>
                        </div>

                        <div className="mb-8">
                            <h3 className="font-bold text-lg text-gray-900 mb-4 border-b border-gray-200 pb-2">è©³ç´°æª¢æ ¸é …ç›®</h3>
                            <div className="grid grid-cols-2 gap-x-8 gap-y-3">
                                {checklist.map(item => (
                                    <div key={item.id} className="flex items-center text-sm mb-1">
                                        {item.checked ? <CheckCircle2 size={16} className="text-green-600 mr-2 flex-shrink-0" /> : <div className="w-4 h-4 border border-gray-300 rounded-full mr-2 flex-shrink-0"></div>}
                                        <span className={item.checked ? 'text-gray-900 font-medium' : 'text-gray-400'}>{item.text}</span>
                                    </div>
                                ))}
                            </div>
                        </div>

                        <div className="mt-12 pt-6 border-t border-gray-100 text-center text-xs text-gray-400">
                            æ­¤å ±å‘Šç”± IG å¸³è™Ÿå¥æª¢å·¥å…·ç”Ÿæˆ
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
